<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–¢–µ—Å—Ç –¥–∞–Ω–Ω—ã—Ö –æ –ú–∏–Ω—Å–∫–µ</title>

    <!-- Test Styles -->
    <link rel="stylesheet" href="../assets/css/test.css" />
  </head>
  <body>
    <div class="container">
      <h1>üèôÔ∏è –¢–µ—Å—Ç –¥–∞–Ω–Ω—ã—Ö –æ –ú–∏–Ω—Å–∫–µ</h1>

      <div id="loading">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</div>
      <div id="content" style="display: none"></div>
    </div>

    <script>
      // –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö
      fetch("../assets/data/belarus-regions.geojson")
        .then((response) => response.json())
        .then((data) => {
          const loading = document.getElementById("loading");
          const content = document.getElementById("content");

          // –ü–æ–∏—Å–∫ –¥–∞–Ω–Ω—ã—Ö –æ –ú–∏–Ω—Å–∫–µ
          const minskData = data.features.find(
            (f) => f.properties.name === "–ú–∏–Ω—Å–∫"
          );

          if (minskData) {
            loading.innerHTML =
              '<span class="success">‚úÖ –î–∞–Ω–Ω—ã–µ –æ –ú–∏–Ω—Å–∫–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!</span>';

            const props = minskData.properties;
            const density = (props.population / props.area).toFixed(1);

            let nationalitiesHTML =
              '<div class="nationalities"><strong>–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–æ—Å—Ç–∞–≤ (–ø–µ—Ä–µ–ø–∏—Å—å 2019):</strong>';
            Object.keys(props.nationalities).forEach((nationality) => {
              nationalitiesHTML += `<div class="nationality-item">‚Ä¢ ${nationality}: ${props.nationalities[nationality]}%</div>`;
            });
            nationalitiesHTML += "</div>";

            content.innerHTML = `
                        <div class="status">
                            üèõÔ∏è –°—Ç–æ–ª–∏—Ü–∞ –†–µ—Å–ø—É–±–ª–∏–∫–∏ –ë–µ–ª–∞—Ä—É—Å—å
                        </div>
                        
                        <div class="info-card">
                            <div class="info-item">
                                <span class="label">üë• –ù–∞—Å–µ–ª–µ–Ω–∏–µ:</span>
                                <span class="value">${props.population.toLocaleString(
                                  "ru-RU"
                                )} —á–µ–ª.</span>
                            </div>
                            <div class="info-item">
                                <span class="label">üìè –ü–ª–æ—â–∞–¥—å:</span>
                                <span class="value">${props.area.toLocaleString(
                                  "ru-RU"
                                )} –∫–º¬≤</span>
                            </div>
                            <div class="info-item">
                                <span class="label">üìä –ü–ª–æ—Ç–Ω–æ—Å—Ç—å:</span>
                                <span class="value">${density} —á–µ–ª/–∫–º¬≤</span>
                            </div>
                            <div class="info-item">
                                <span class="label">üé® –¶–≤–µ—Ç –º–∞—Ä–∫–µ—Ä–∞:</span>
                                <span class="value">
                                    <span style="display: inline-block; width: 30px; height: 30px; background: ${
                                      props.color
                                    }; border-radius: 50%; border: 3px solid white; vertical-align: middle;"></span>
                                    ${props.color}
                                </span>
                            </div>
                            <div class="info-item">
                                <span class="label">üìç –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:</span>
                                <span class="value">[${
                                  minskData.geometry.coordinates[1]
                                }, ${minskData.geometry.coordinates[0]}]</span>
                            </div>
                            <div class="info-item">
                                <span class="label">üó∫Ô∏è –¢–∏–ø –≥–µ–æ–º–µ—Ç—Ä–∏–∏:</span>
                                <span class="value">${
                                  minskData.geometry.type
                                }</span>
                            </div>
                        </div>
                        
                        ${nationalitiesHTML}
                        
                        <a href="../index.html" class="button">
                            üó∫Ô∏è –û—Ç–∫—Ä—ã—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –∫–∞—Ä—Ç—É
                        </a>
                    `;

            content.style.display = "block";

            setTimeout(() => {
              loading.style.display = "none";
            }, 2000);
          } else {
            loading.innerHTML =
              '<span class="error">‚ùå –î–∞–Ω–Ω—ã–µ –æ –ú–∏–Ω—Å–∫–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ GeoJSON —Ñ–∞–π–ª–µ!</span>';
          }
        })
        .catch((error) => {
          document.getElementById(
            "loading"
          ).innerHTML = `<span class="error">‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö: ${error.message}</span>`;
        });
    </script>
  </body>
</html>
