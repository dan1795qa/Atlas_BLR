# Реализация функционала районов в Атласе Беларуси

## Обюснение

Реализован полный функционал для показа и взаимодействия с 118 районами Беларуси.

Поведение и оформление поровняны с реализацией режима "Области".

## Используемые данные

1. **belarus-regions-district.geojson** - GeoJSON файл с геометрией полигонов районов
   - Поле `shapeName` - название района
   - Основа для интерактивности ополигонах

2. **all-districts-complete.js** - данные о 118 районах
   - Объект `allDistrictsInfo` с намозданиями районов
   - Каждый район имеет:
     - название и область
     - координаты центра `centerCoords` [lng, lat]
     - население и плотность
     - год основания
     - достопримечательности
     - основные отрасли экономики

## Основное филе реализации

### js/districts.js

Модуль для работы с районами Leaflet карты.

**Ключевые функции:**

- `loadDistrictsData()` - загружает GeoJSON и отображает все элементы районов
- `addDistrictBoundaries(geojson)` - рисует полигоны районов с интерактивными событиями
- `addDistrictMarkers()` - добавляет маркеры на административные центры районов
- `selectDistrict(name, layer, feature)` - выделяет район визуально
- `showDistrictInfo(districtInfo)` - отображает инфо-панель справа с полной информацией
- `resetAllDistricts()` - сбрасывает все выделения и закрывает панель
- `switchToDistricts()` - переключает на режим районов
- `switchToRegions()` - переключает рос режима областей

## Поведение при взаимодействии

### Клик на полигон района
1. Навести мышь - полигон где менье по цвету (прозрачность 0.35)
2. Клик - район выделяется зеленым
3. Карта приближается (делает `fitBounds` к границам)
4. Маркер становится интерактивным (на нем можно кликнуть)
5. Справа открывается инфо-панель с полною информацией района

### Клик на маркер центра
1. Навести мышь - маркер увеличивается (radius 11)
2. Клик
   - Отображается popup с информацией центра
   - Отображается инфо-панель работы района

### Клик вне элементов
- Все выделения сбрасываются
- Инфо-панель закрывается
- Районы вовращаются в исходные стили

## Модифицированные файлы

### index.html
- ID элементов инфо-панели: `infoPanel`, `infoPanelContent`, `closePanel`
- ID кнопок навигации: `mapRegionsBtn`, `mapDistrictsBtn`

### css/style.css
- Класс `.active` - новые стили для открытой панели
- `.district-info` - оформление контента для районов
- Респонсивные стили для мрдбильных устройств

### js/navigation.js
- Обновлены обработчики кнопок для переключения режимов

### js/app.js
- Глобальные переменные для обмена данными с districts.js

## Особенности реализации

### Обработка кликов на карте
- Новая функция `attachDistrictClickHandler()` аналогична `regionClickHandler` из app.js
- Отымие обработчик детектирует клик ли по элементу
- Деселектион только вне районов и маркеров

### Маркеры районных центров
- **Размер**: 8 пикселей (замена 6 на большие)
- **Оптимальные цвета**: светлая граница (#37FF8B) и зеленая заливка (#7cf578)
- **Hover эффекты**: маркер увеличивается до 11 пикселей (как для городов в app.js)

### Модальность инфо-панели
- Панель автоматически закрывается при:
  - Клике кнопки Close
  - Клике вне элементов
  - Переключении между режимами (районы <-> области)

## Цветовая схема районов

- **Граница района**: `#7cf578` (светло-зеленая)
- **Заливка района**: `#4a7c7e` (серо-зеленая) с 0.25 прозрачностью
- **На ховере**: 0.35 прозрачность
- **При выделении**: та же цвета с 0.5 прозрачностью

## Навигация между режимами

### Кнопка "Районы"
```
1. Удаляется обработчик клика регионов
2. Скрываются данные областей и городов
3. Отображаются РАЙОНЫ
4. Добавляется обработчик клика для районов
5. Карта вовращается к стандартному виду
6. Обновляется кнопка навигации
```

### Кнопка "Области"
```
1. Удаляется обработчик клика районов
2. Скрываются ДАННЫЕ рАЙОНОВ
3. Отображаются ОБЛАСТИ
4. Карта вовращается к стандартному виду
5. Обновляется кнопка навигации
```

## Квик старта

1. Откройте сайт
2. Нажмите "Районы"
3. Очките ПОНЕМНУ, как работает:
   - Все границы районов
   - Маркеры центров
   - Все вазимодействия
4. Найти один из районов, кликнуть
5. Проверить:
   - Полигон выделен
   - Карта приблизилась
   - Маркер стал кликабельным
   - Панель открылась
6. Кликнуть на маркер
7. Проверить popup и обновленную панель

## Отладка

Откройте DevTools (F12) для анализа логов и ошибок.
